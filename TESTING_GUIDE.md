# 🚀 模拟面试板块 - 快速测试指南

## 前置要求

1. **后端服务** ✅
   - FastAPI 已启动在 `http://127.0.0.1:8000`
   - `/api/chat` 接口可用

2. **浏览器** ✅
   - Chrome/Edge/Firefox 最新版本
   - HTTPS 或 localhost 环境（用于语音识别）
   - 麦克风权限已授予

3. **环境** ✅
   ```bash
   cd frontend
   npm install  # 如果还没装依赖
   npm run dev
   ```

---

## 功能演示步骤

### 第 1 步：访问模拟面试页面
1. 浏览器打开 `http://localhost:5173`（或 Vite 分配的端口）
2. 点击左侧菜单 **"模拟面试"**
3. 应该看到：
   - 顶部有**面试官状态栏**（蓝色头像 + "✓ 等待您的回答"）
   - 中间是聊天记录（初始一条 AI 问候）
   - 底部是输入区（麦克风按钮 + 输入框 + 发送按钮）

---

### 第 2 步：测试面试官动画

#### 观察"思考中"状态（黄色呼吸）
1. 在输入框输入任何文字，点击"发送"
2. **立即观察**面试官头像：
   - 头像开始放大缩小（呼吸动画）
   - 边框变成**黄色**
   - 发光效果出现
   - 状态文本变成 **"🤔 正在思考..."**

#### 观察"回复中"状态（绿色呼吸）
1. 等待后端返回回复（0.5-2 秒）
2. AI 消息出现在聊天窗口
3. **立即观察**面试官头像：
   - 呼吸动画继续，周期加快到 1.5s
   - 边框变成**绿色**
   - 脉冲指示器出现
   - 状态文本变成 **"💬 正在回复..."**
   - 右上角小圆点不断脉冲

#### 观察"待机"状态（蓝色静止）
1. 等待约 3 秒
2. 头像动画停止
3. 头像恢复**蓝色**边框
4. 状态文本变成 **"✓ 等待您的回答"**
5. 右上角脉冲指示器消失

---

### 第 3 步：测试语音输入

#### 基础语音测试
1. 找到输入框左侧的**麦克风按钮**（🎙️ 图标）
2. 第一次点击按钮：
   - 按钮变成**红色**
   - 图标变成 🔇（音量关闭）
   - `title` 提示："停止录音"
   - 浏览器可能提示麦克风权限，点击"允许"

3. 对着麦克风说话：
   ```
   例如："你能给我讲一下 React 的虚拟 DOM 吗？"
   ```

4. 说话完成后系统自动停止识别：
   - 按钮恢复灰色
   - 图标变回 🎙️
   - 识别的中文文本自动填入输入框

#### 边界情况
- **长语音**：系统仅识别最后一句完整的话
- **无声**：3 秒无声后自动停止
- **不支持**：浏览器不支持时显示警告，按钮保持可用

---

### 第 4 步：测试气泡布局

#### AI 气泡（左侧，灰色）
- 背景：浅灰色 `rgba(240,242,245,0.95)`
- 左下角有**凹陷**（呈现对话框风格）
- 头像：使用 DiceBear 卡通头像
- 无用户名标签

#### 用户气泡（右侧，蓝色）
- 背景：蓝色渐变 `linear-gradient(135deg, ...)`
- 右下角有**凹陷**（呈现对话框风格）
- 文字颜色：白色
- 头像：蓝色渐变圆形

#### 排版
- 气泡最大宽度：70%，自动换行
- 间距：上下 12px，左右 10px
- 对齐：AI 左对齐，用户右对齐

---

### 第 5 步：综合交互测试

#### 场景：完整对话流程
```
1. 用户说话（语音或文字）
2. 点击发送
3. 观察面试官动画变化（思考→回复→待机）
4. AI 回复出现
5. 用户继续说话
6. 重复...
```

#### 预期结果
```
✅ 动画流畅无卡顿
✅ 文本换行正确
✅ 气泡对齐准确
✅ 语音识别准确（中文）
✅ 状态指示真实反映 AI 状态
```

---

## 🎯 关键验证点

| 检查项 | 预期结果 | 状态 |
|--------|--------|------|
| 面试官头像显示 | DiceBear 卡通头像 | ☐ |
| 思考动画（黄）| 2s 周期呼吸 | ☐ |
| 说话动画（绿）| 1.5s 周期呼吸 + 脉冲 | ☐ |
| 待机动画（蓝）| 无动画，3s 恢复 | ☐ |
| 麦克风按钮 | 灰色↔红色切换 | ☐ |
| 语音识别 | 中文文本正确填入 | ☐ |
| AI 气泡 | 左侧灰色，有凹陷 | ☐ |
| 用户气泡 | 右侧蓝色，有凹陷 | ☐ |
| Loading 动画 | 三个小球跳动 | ☐ |
| 整体布局 | 紧凑现代，无空隙 | ☐ |

---

## 🐛 常见问题排查

### 问题：语音按钮灰显或不可用

**原因**：浏览器不支持 Web Speech API

**解决**：
1. 使用 Chrome/Edge（完全支持）
2. Firefox 可能需要启用 `media.webspeech.recognition.enable`
3. Safari 暂无原生支持

### 问题：面试官头像不显示

**原因**：DiceBear API 无法访问

**排查**：
1. 检查网络连接
2. 尝试直接访问：https://api.dicebear.com/7.x/avataaars/svg?seed=Interviewer
3. 如无法访问，需要配置代理或更换头像源

### 问题：动画卡顿

**原因**：浏览器性能不足或其他标签页占用

**解决**：
1. 关闭其他浏览器标签页
2. 清理浏览器缓存
3. 检查 GPU 硬件加速是否启用

### 问题：语音无法识别

**原因**：
1. 麦克风权限未授予
2. 麦克风硬件故障
3. 网络不稳定

**排查**：
1. 检查浏览器麦克风权限设置
2. 在系统设置中测试麦克风
3. 检查网络延迟

---

## 📊 性能指标（参考）

```
初始加载时间：    < 1s
动画帧率：        60fps（主流设备）
语音识别延迟：    300-1000ms（取决于网络）
聊天响应时间：    0.5-2s（后端处理时间）
```

---

## 📱 设备兼容性

| 设备类型 | 浏览器 | 面试官 | 语音 | 气泡 |
|---------|--------|-------|------|------|
| PC | Chrome | ✅ | ✅ | ✅ |
| PC | Edge | ✅ | ✅ | ✅ |
| PC | Firefox | ✅ | ⚠️ | ✅ |
| Mac | Chrome | ✅ | ✅ | ✅ |
| Mac | Safari | ✅ | ⚠️ | ✅ |
| 移动 | Chrome | ✅ | ✅ | ✅ |

---

## 🎓 学习资源

- [Web Speech API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API)
- [CSS 动画](https://developer.mozilla.org/en-US/docs/Web/CSS/animation)
- [DiceBear 头像 API](https://www.dicebear.com/)
- [Vue 3 Composition API](https://vuejs.org/guide/extras/composition-api-faq.html)

---

**最后更新**：2026-01-17
**测试时间**：约 10-15 分钟
**难度等级**：⭐ 简单（无需编码）
